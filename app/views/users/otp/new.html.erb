<div class="relative min-h-screen flex items-center justify-center bg-[#0a0a2a] text-white overflow-hidden font-poppins p-4">

  <!-- Background Glow Circles -->
  <div class="absolute top-0 -left-40 w-[400px] h-[400px] bg-yellow-400/10 rounded-full blur-3xl animate-float-slow"></div>
  <div class="absolute bottom-0 -right-40 w-[400px] h-[400px] bg-purple-600/10 rounded-full blur-3xl animate-float-slow delay-1000"></div>

  <!-- Sparkles -->
  <div class="absolute inset-0 pointer-events-none">
    <% 30.times do %>
      <span class="absolute w-1 h-1 bg-yellow-300 rounded-full animate-sparkle"
            style="top:<%= rand(100) %>%; left:<%= rand(100) %>%"></span>
    <% end %>
  </div>

  <!-- Main Container -->
  <div class="relative z-10 w-full max-w-md flex flex-col items-center space-y-6 text-center animate-fade-in-up">

    <!-- Title -->
    <h1 class="text-4xl font-extrabold tracking-wide bg-gradient-to-r from-yellow-200 via-white to-yellow-400 bg-clip-text text-transparent shine-text">
      ENTER OTP
    </h1>
    <p class="text-gray-300 text-base italic mb-4">Please enter the OTP sent to your phone/email</p>

    <!-- OTP Form -->
    <%= form_with url: users_verify_otp_path, local: true, class: "w-full space-y-4" do %>
      <div class="flex flex-col space-y-2 text-left">
        <%= label_tag :otp_code, "OTP Code", class: "text-yellow-400 font-medium" %>
        <%= text_field_tag :otp_code, nil, placeholder: "Enter 6-digit code", maxlength: 6,
              class: "w-full px-5 py-4 rounded-xl bg-white/10 border border-yellow-400/40 text-white placeholder-gray-400 transition-all duration-300 focus:border-yellow-400 focus:ring-2 focus:ring-yellow-400/30 text-center text-xl tracking-widest shadow-md focus:shadow-yellow-400/30" %>
      </div>

      <!-- Submit -->
      <div class="pt-4">
        <%= submit_tag "âœ… Verify OTP", class: "w-full py-3 bg-gradient-to-r from-lime-300 via-yellow-300 to-orange-400 text-black font-bold rounded-xl shadow-lg hover:shadow-yellow-400/40 hover:scale-105 transition-all duration-300 ease-in-out transform" %>
      </div>
    <% end %>

    <!-- Resend Buttons -->
    <div class="w-full pt-4">
      <div class="flex flex-col sm:flex-row gap-3">
        <%= button_to users_resend_otp_path(via: "email"), method: :post,
              class: "w-full sm:w-1/2 py-3 px-4 flex items-center justify-center gap-2 border border-yellow-300/50 bg-white/10 text-yellow-300 hover:bg-yellow-300 hover:text-black font-semibold tracking-wide rounded-xl shadow-md hover:shadow-yellow-400/40 transition-all duration-300" do %>
          ðŸ“§ Resend via Email
        <% end %>

        <%= button_to users_resend_otp_path(via: "sms"), method: :post,
              class: "w-full sm:w-1/2 py-3 px-4 flex items-center justify-center gap-2 border border-yellow-300/50 bg-white/10 text-yellow-300 hover:bg-yellow-300 hover:text-black font-semibold tracking-wide rounded-xl shadow-md hover:shadow-yellow-400/40 transition-all duration-300" do %>
          ðŸ“± Resend via SMS
        <% end %>
      </div>
    </div>


    <!-- Cancel -->
    <%= link_to "â† Cancel", root_path, class: "mt-6 text-yellow-400 hover:underline text-lg transition hover:text-yellow-300" %>

  </div>
</div>


<script>
document.addEventListener("DOMContentLoaded", () => {
  const otpInput = document.querySelector('input[name="otp_code"]');

  // Auto focus on load
  if (otpInput) otpInput.focus();

  // Allow only numbers
  otpInput?.addEventListener('input', (e) => {
    e.target.value = e.target.value.replace(/\D/g, '');
  });

  // Paste event: filter to digits only
  otpInput?.addEventListener('paste', (e) => {
    e.preventDefault();
    const paste = (e.clipboardData || window.clipboardData).getData('text');
    otpInput.value = paste.replace(/\D/g, '').slice(0, 6); // Limit to 6 digits
  });
});
</script>
