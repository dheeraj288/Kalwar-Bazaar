<div class="relative min-h-screen flex items-center justify-center bg-[#0a0a2a] text-white overflow-hidden font-poppins p-4">

  <!-- Background Glow Circles -->
  <div class="absolute top-0 -left-40 w-[400px] h-[400px] bg-yellow-400/20 rounded-full blur-3xl animate-float-slow"></div>
  <div class="absolute bottom-0 -right-40 w-[400px] h-[400px] bg-orange-400/20 rounded-full blur-3xl animate-float-slow delay-1000"></div>

  <!-- Sparkles -->
  <div class="absolute inset-0 pointer-events-none">
    <% 20.times do %>
      <span class="absolute w-1.5 h-1.5 bg-white rounded-full animate-sparkle"
            style="top:<%= rand(100) %>%; left:<%= rand(100) %>%; animation-duration:<%= rand(2..5) %>s"></span>
    <% end %>
  </div>

  <!-- Main Container -->
  <div class="relative z-10 w-full max-w-md flex flex-col items-center space-y-6 text-center">

    <!-- Logo + Pulse -->
    <div class="relative w-32 h-32 rounded-full border-4 border-yellow-400 flex items-center justify-center shadow-[0_0_40px_rgba(255,215,0,0.5)] bg-white/5 backdrop-blur-md animate-pulse-slow mb-6">
      <%= image_tag "4.png", alt: "Logo", class: "w-20 h-20 drop-shadow-lg relative z-10" %>
    </div>

    <!-- Title -->
    <h1 class="text-4xl font-extrabold tracking-wide bg-gradient-to-r from-yellow-200 via-white to-yellow-400 bg-clip-text text-transparent animate-shine">
      LOGIN
    </h1>

    <!-- Subtitle -->
    <p class="text-gray-300 text-base italic mb-4">Good to see you back! ❤️</p>

    <!-- Login Form -->
    <%= form_for(resource, as: resource_name, url: session_path(resource_name), html: {class: "w-full space-y-4"}) do |f| %>
      <%= render "devise/shared/error_messages", resource: resource %>

      <div class="flex flex-col space-y-3">
        <%= f.label :email, class: "text-left text-yellow-400 font-medium" %>
        <%= f.email_field :email, value: "", placeholder: "Enter your email", class: "w-full px-4 py-3 rounded-xl bg-white/15 border border-yellow-400/40 text-white placeholder-yellow-200/50 transition focus:border-yellow-400 focus:ring focus:ring-yellow-400/30 focus:outline-none" %>
      </div>

      <div class="flex flex-col space-y-3">
        <%= f.label :phone_number, class: "text-left text-yellow-400 font-medium" %>
        <%= f.telephone_field :phone_number, id: "phone", value: "", placeholder: "Enter your phone number", class: "w-full px-4 py-3 rounded-xl bg-white/15 border border-yellow-400/40 text-white placeholder-yellow-200/50 transition focus:border-yellow-400 focus:ring focus:ring-yellow-400/30 focus:outline-none" %>
      </div>

      <div class="flex flex-col space-y-3">
        <%= f.label :password, class: "text-left text-yellow-400 font-medium" %>
        <%= f.password_field :password, placeholder: "Enter your password", class: "w-full px-4 py-3 rounded-xl bg-white/15 border border-yellow-400/40 text-white placeholder-yellow-200/50 transition focus:border-yellow-400 focus:ring focus:ring-yellow-400/30 focus:outline-none" %>
      </div>

      <div class="pt-4">
        <%= f.submit "Login", class: "w-full py-3 bg-gradient-to-r from-yellow-400 via-orange-400 to-pink-500 text-black font-bold rounded-xl shadow-lg hover:scale-105 transform transition duration-300" %>
      </div>
    <% end %>

    <%= link_to "Cancel", root_path, class: "mt-4 text-yellow-400 hover:underline text-xl" %>

  </div>
</div>

<!-- Include intl-tel-input CDN -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/css/intlTelInput.min.css"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/intlTelInput.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.8/js/utils.js"></script>

<!-- Init intl-tel-input -->
<script>
document.addEventListener("turbo:load", function () {
  const input = document.querySelector("#phone");
  if (input) {
    window.intlTelInput(input, {
      initialCountry: "auto",
      geoIpLookup: function(callback) {
        fetch("https://ipinfo.io/json?token=36d2a4fd9c6534")
          .then(resp => resp.json())
          .then(resp => callback(resp.country))
          .catch(() => callback("in"));
      },
      separateDialCode: true,
      autoHideDialCode: false,
      nationalMode: false,
      preferredCountries: ["in","us","gb"],
      dropdownContainer: document.body,
      placeholderNumberType: "MOBILE"
    });
  }
});
</script>

<!-- Animations -->
<style>
@keyframes float-slow { 0%,100%{transform:translateY(0);}50%{transform:translateY(-20px);} }
.animate-float-slow{animation:float-slow 12s ease-in-out infinite;}
.delay-1000{animation-delay:1s;}

@keyframes pulse-slow{0%,100%{box-shadow:0 0 40px rgba(255,215,0,0.5);}50%{box-shadow:0 0 70px rgba(255,215,0,0.8);}}
.animate-pulse-slow{animation:pulse-slow 5s infinite;}

@keyframes sparkle{0%,100%{opacity:0;transform:scale(0);}50%{opacity:1;transform:scale(1);}}
.animate-sparkle{animation:sparkle infinite;}

@keyframes shine{0%{background-position:-200% center;}100%{background-position:200% center;}}
.animate-shine{background-size:200% auto; animation:shine 2.5s linear infinite;}

/* intl-tel-input styling tweaks */
.iti__country-list { max-height: 250px !important; overflow-y: auto !important; font-size: 0.95rem; }
.iti__flag { width:22px; height:16px; }
</style>
